C51 COMPILER V9.54   PWM                                                                   05/14/2021 15:31:56 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE PWM
OBJECT MODULE PLACED IN .\Objects\pwm.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Keil_v5\C51\BIN\C51.EXE pwm.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PR
                    -INT(.\Listings\pwm.lst) TABS(2) OBJECT(.\Objects\pwm.obj)

line level    source

   1          #include"reg52.h"
   2          typedef unsigned int u16;
   3          typedef unsigned char u8;
   4          void Timer0Init();
   5          u16 timer1;
   6          //u16 count=10;
   7          sbit ENA=P1^5;
   8          sbit IN1=P1^4;
   9          sbit IN2=P1^3;
  10          sbit IN3=P1^2;
  11          sbit IN4=P1^1;
  12          sbit ENB=P1^0;
  13          
  14          void pwm1(u16 count)
  15          {
  16   1       if(count>=timer1)
  17   1         IN1=1;
  18   1         else
  19   1         IN1=0;
  20   1      }
  21          void pwm2(u16 count)
  22          {
  23   1       if(count>=timer1)IN2=1;
  24   1         else
  25   1         IN2=0;
  26   1      }
  27          void pwm3(u16 count)
  28          {
  29   1       if(count>=timer1)IN3=1;
  30   1         else
  31   1         IN3=0;
  32   1      }
  33          void pwm4(u16 count)
  34          {
  35   1       if(count>=timer1)IN4=1;
  36   1         else
  37   1         IN4=0;
  38   1      }
  39          
  40          
  41          void Forward()
  42          {
  43   1       pwm1(50);
  44   1       IN2=0;
  45   1       ENA=1;
  46   1       IN3=0;
  47   1       pwm4(50);
  48   1       ENB=1;
  49   1      }
  50          void back()
  51          {
  52   1       IN1=0;
  53   1       pwm2(50);
  54   1       ENA=1;
C51 COMPILER V9.54   PWM                                                                   05/14/2021 15:31:56 PAGE 2   

  55   1       pwm3(50);
  56   1       IN4=0;
  57   1       ENB=1;
  58   1      }
  59          void turnright()
  60          {
  61   1       IN1=0;
  62   1       IN2=0;
  63   1       ENA=0;
  64   1       IN3=0;
  65   1       pwm4(50);
  66   1       ENB=1;
  67   1      }
  68          void turnleft()
  69          {
  70   1       pwm1(50);
  71   1       IN2=0;
  72   1       ENA=1;
  73   1       IN3=0;
  74   1       IN4=0;
  75   1       ENB=0;
  76   1      }
  77          void stop()
  78          {
  79   1       IN1=0;
  80   1       IN2=0;
  81   1       IN3=0;
  82   1       IN4=0;
  83   1      }
  84          
  85          void main()
  86          {   
  87   1             
  88   1         Timer0Init();
  89   1         
  90   1         while(1)
  91   1         {  
  92   2               pwm1(30);
  93   2           } 
  94   1      }
  95          
  96          void Timer0Init()
  97          {
  98   1       TMOD|=0X01;
  99   1       TH0=0XFF;
 100   1       TL0=0X38;
 101   1       ET0=1;
 102   1       EA=1;
 103   1       TR0=1;
 104   1      
 105   1      }
 106          void Time0() interrupt 1
 107          {
 108   1       TH0=0XFF;
 109   1       TL0=0X38;
 110   1       timer1++;
 111   1       if(timer1>100)
 112   1       {
 113   2        timer1=0;
 114   2       }
 115   1      }

C51 COMPILER V9.54   PWM                                                                   05/14/2021 15:31:56 PAGE 3   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    209    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
