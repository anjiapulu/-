C51 COMPILER V9.54   MAIN                                                                  05/10/2021 15:13:17 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Program Files (x86)\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND T
                    -ABS(2)

line level    source

   1          /*****************HJ-4WD»Û¾»ËÄÇýÀ¶ÑÀÖÇÄÜÐ¡³µÀý³Ì*****************
   2          *  Æ½Ì¨£ºHJ-4WD/HJ-E/HL-1ÖÇÄÜÐ¡³µ + Keil U4 + STC89C52
   3          *  Ãû³Æ£º
   4          *  ¹«Ë¾£º»Û¾»µç×Ó¿Æ¼¼ÓÐÏÞ¹«Ë¾
   5          *  ÌÔ±¦£ºhttp://shop37031453.taobao.com       
   6          *  ÍøÕ¾£ºwww.hjmcu.com  ÖÇÄÜÐ¡³µ×¨ÓÃÍøÕ¾£ºWWW.HLMCU.COM
   7          *  ±àÐ´£º
   8          *  ÈÕÆÚ£º2008-8-08
   9          *  ½»Á÷:ÖÇÄÜ³µQQ:1526248688  ¿ª·¢°åQQ:398115088
  10          *  ¾§Õñ:11.0592MHZ
  11          *  ËµÃ÷£ºÃâ·Ñ¿ªÔ´£¬²»Ìá¹©Ô´´úÂë·ÖÎö£¬ÓÐÎÊÌâÖ±½Óµ½»Û¾»ÂÛÌ³½»Á÷
  12          *  ÂÛÌ³£ºhttp://hjdz.haotui.com 
  13          *  Ãâ·Ñ½áÔµ£º5ÐÇºÃÆÀÔùËÍ18¸ö×ÊÁÏ°ü£¬×·¼ÓÆÀ¼ÛºóÔÙ¼ÓËÍ20G×ÊÁÏ£¬ÍøÉÏÍøÅÌÏÂÔØ
  14          *  ÊÓÆµ½Ì³Ì£º±¾Ð¡³µÅäÌ×ÏêÏ¸ÊÓÆµ½Ì³Ì£¬ÓÐÐèÒªÇëµ½»Û¾»ÍøÕ¾Ãâ·ÑÏÂÔØ
  15          ******************************************************************/
  16              // ±¾³ÌÐò²»ÊäÈëPWM£¬Ð¡³µÈ«ËÙ¶ÈÔËÐÐ¡£  
  17            //×¢Òâ³ÌÐòÖ»×ö²Î¿¼Ö®ÓÃ£¬Òª´ïµ½×îÀíÏëµÄÐ§¹û£¬»¹ÐèÒªÍ¬Ñ§ÃÇÏ¸ÐÄµ÷ÊÔ¡£  
  18            //×¢ÒâÀ¶ÑÀÄ£¿é½ÓÏß£¬¼±ÐÔÖ®ÈË¾­³£½Ó´íÏß£¬ÉÕ»µÄ£¿é£¬ÇëÒ»¶¨ÒªºË¶ÔºÃÔÙÍ¨µçÊÔÑé£¬Ä£¿é½Ó´íÏßÉÕ»µ²»±£ÐÞ£¬²»»»»õµ
             -Ä¡£
  19            /****************************************************************************
  20             Ó²¼þÁ¬½Ó
  21             À¶ÑÀÓÐ4ÌõÏß¶¨Òå£º
  22              VCC  5V
  23                GND  GND
  24              TDX  TX
  25              RXD  RD
  26             °ÑÀ¶ÑÀ²åÈëµ¥Æ¬»úJ2½Ó¿ÚÖÐ  --×¢Òâ²»Òª½Ó´íÏß£¬·ñÔòÉÕ»µÄ£¿é£¬²»±£ÐÞ£¬²»»»»õ¡£
  27            ****************************************************************************/
  28          
  29          #include<AT89x51.H>
  30          #include<HJ-4WD_PWM.H>      //°üº¬HJ-4WDÀ¶ÑÀÖÇÄÜÐ¡³µÇý¶¯IO¿Ú¶¨ÒåµÈº¯Êý
  31          
  32            //HJ-4WDÐ¡³µÇý¶¯½ÓÏß¶¨Òå
  33          
  34            #define left     'C'
  35              #define right    'D'
  36            #define up       'A'
  37              #define down     'B'
  38            #define stop     'F'
  39             sbit lanya=P3^2;
  40             sbit zidong=P3^3;
  41             int m=0,n=0;
  42          /************************************************************************/  
  43          //ÑÓÊ±º¯Êý  
  44          
  45          
  46          /************************************************************************/
  47          //×Ö·û´®·¢ËÍº¯Êý
  48          
  49                  
  50                  
  51          /************************************************************************/
  52          
  53          /************************************************************************/
C51 COMPILER V9.54   MAIN                                                                  05/10/2021 15:13:17 PAGE 2   

  54          void sint() interrupt 4   //ÖÐ¶Ï½ÓÊÕ3¸ö×Ö½Ú
  55          { 
  56   1       
  57   1          if(RI)                   //ÊÇ·ñ½ÓÊÕÖÐ¶Ï
  58   1          {
  59   2             RI=0;
  60   2             dat=SBUF;
  61   2             if(dat=='O'&&(i==0)) //½ÓÊÕÊý¾ÝµÚÒ»Ö¡
  62   2               {
  63   3                  buff[i]=dat;
  64   3                  flag=1;        //¿ªÊ¼½ÓÊÕÊý¾Ý
  65   3               }
  66   2             else
  67   2            if(flag==1)
  68   2           {
  69   3            i++;
  70   3            buff[i]=dat;
  71   3            if(i>=2)
  72   3            {i=0;flag=0;flag_REC=1 ;}  // Í£Ö¹½ÓÊÕ
  73   3           }
  74   2         }
  75   1      }
  76          /*********************************************************************/    
  77          /*--Ö÷º¯Êý--*/
  78            void main(void)
  79          {
  80   1        int k=0;
  81   1          P1=0X00;    //Ð¡³µÍ£Ö¹
  82   1          TMOD=0X21;
  83   1          TH0= 0XFc;      //1ms¶¨Ê±
  84   1          TL0= 0X18;
  85   1          TH1=0xFd;        //11.0592M¾§Õñ£¬9600²¨ÌØÂÊ
  86   1          TL1=0xFd;
  87   1          SCON=0x50;  
  88   1          PCON=0x00; 
  89   1          TR1=1;
  90   1          TR0= 1;
  91   1          ET0= 1;
  92   1          EA = 1;
  93   1          ES = 1;
  94   1        while(1)
  95   1          {
  96   2         if(lanya==0)
  97   2         {
  98   3         k=2;
  99   3         }
 100   2         if(zidong==0)
 101   2         {
 102   3         k=1;
 103   3         }
 104   2         
 105   2         if(k==1)/*×Ô¶¯µµ*/
 106   2         {
 107   3      
 108   3         while(Right_B_led==0||Left_B_led==0||(Right_B_led==0&&Left_B_led==0))/*ºìÍâ±ÜÕÏ*/
 109   3         {
 110   4            if(Right_B_led==0&&Left_B_led==0)   //Á½±ß¼ì²âµ½ºìÍâ Ð¡³µºóÍË
 111   4                {   
 112   5          
 113   5                  backrun();             //µ÷ÓÃµç»úÏòºó×ªº¯Êý
 114   5                  delay(50);
 115   5                  leftrun();//µ÷ÓÃ×ó×ªº¯Êý
C51 COMPILER V9.54   MAIN                                                                  05/10/2021 15:13:17 PAGE 3   

 116   5                  delay(30);
 117   5      
 118   5                }
 119   4      
 120   4               
 121   4                  if(Right_B_led==0&&Left_B_led==1)   //ÓÒ±ß¼ì²âµ½ºìÍâ   Ð¡³µÐèÒªÏò×ó×ª
 122   4                {   
 123   5          
 124   5                  leftrun();//µ÷ÓÃ×ó×ªº¯Êý
 125   5                  delay(10);
 126   5                }
 127   4      
 128   4                   if(Left_B_led==0&&Right_B_led==1)      //×ó±ß¼ì²âµ½ºìÍâ   Ð¡³µÐèÒªÏòÓÒ×ª
 129   4               {
 130   5                   rightrun();//µ÷ÓÃÓÒ×ªº¯Êý
 131   5                   delay(10);
 132   5                 }    
 133   4         
 134   4         }
 135   3        
 136   3        
 137   3         while(Right_B_led==1&&Left_B_led==1)                                 /*Ñ­¼£*/
 138   3          {
 139   4            
 140   4         if(Left_X_led==1&&Right_X_led==1)
 141   4         {
 142   5         run();
 143   5         }
 144   4         if(Left_X_led==1&&Right_X_led==0)   
 145   4        {
 146   5            
 147   5          Left_moto_go;           
 148   5          Right_moto_back;
 149   5               
 150   5        }
 151   4               
 152   4          if(Right_X_led==1&&Left_X_led==0)   
 153   4        {   
 154   5      
 155   5          Right_moto_go;        
 156   5          Left_moto_back;
 157   5      
 158   5       } 
 159   4          }
 160   3      
 161   3        
 162   3         }  
 163   2         if(k==2)/*ÊÖ¶¯µµ*/
 164   2         {
 165   3          
 166   3           if(flag_REC==1)            //
 167   3           {
 168   4          flag_REC=0;
 169   4          if(buff[0]=='O'&&buff[1]=='N')  //µÚÒ»¸ö×Ö½ÚÎªO£¬µÚ¶þ¸ö×Ö½ÚÎªN£¬µÚÈý¸ö×Ö½ÚÎª¿ØÖÆÂë
 170   4          switch(buff[2])
 171   4             {
 172   5                case up :               // Ç°½ø
 173   5              send_str( );
 174   5              run();
 175   5              break;
 176   5                case down:            // ºóÍË
 177   5               send_str1( );
C51 COMPILER V9.54   MAIN                                                                  05/10/2021 15:13:17 PAGE 4   

 178   5              backrun();
 179   5              break;
 180   5                case left:            // ×ó×ª
 181   5               send_str3( );
 182   5              leftrun();
 183   5              break;
 184   5                case right:           // ÓÒ×ª
 185   5              send_str2( );
 186   5              rightrun();
 187   5              break;
 188   5                case stop:            // Í£Ö¹
 189   5               send_str4( );
 190   5              stoprun();
 191   5              break;
 192   5      
 193   5             }
 194   4            
 195   4                 
 196   4         }
 197   3         }
 198   2            
 199   2                 
 200   2         
 201   2        
 202   2         }
 203   1      } 


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    718    ----
   CONSTANT SIZE    =     85    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     17       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      4    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
